<!-- posts.html -->
{% for post in posts %}
  <div class="post">
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    <button onclick="likePost({{ post.id }})">Like</button>
    <button onclick="dislikePost({{ post.id }})">Dislike</button>
    <p>Likes: <span id="likes-{{ post.id }}">{{ post.likes }}</span></p>
    <p>Dislikes: <span id="dislikes-{{ post.id }}">{{ post.dislikes }}</span></p>
    <p>Rating: <span id="rating-{{ post.id }}">{{ post.rating }}</span></p>
  </div>
{% endfor %}

<script>
function likePost(postId) {
    fetch(`/like/${postId}/`)
    .then(response => response.json())
    .then(data => {
        document.getElementById(`likes-${postId}`).textContent = data.likes;
        document.getElementById(`dislikes-${postId}`).textContent = data.dislikes;
        document.getElementById(`rating-${postId}`).textContent = data.rating;
    });
}

function dislikePost(postId) {
    fetch(`/dislike/${postId}/`)
    .then(response => response.json())
    .then(data => {
        document.getElementById(`likes-${postId}`).textContent = data.likes;
        document.getElementById(`dislikes-${postId}`).textContent = data.dislikes;
        document.getElementById(`rating-${postId}`).textContent = data.rating;
    });
}
</script>
