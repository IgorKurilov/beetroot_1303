Сервер:

    Импортируем необходимые библиотеки.
    Инициализируем словари clients и client_ids для хранения информации о подключенных клиентах.
    Функция handle_client обрабатывает входящие соединения клиентов. Она читает сообщения от клиентов, обрабатывает команды для изменения имени и рассылает сообщения всем подключенным клиентам.
    Функция broadcast отвечает за отправку сообщений всем клиентам.
    Функция start_server запускает сервер и ждет новых подключений.
    Aункция для отправки приватного сообщения.
    В функцию broadcast добавлен параметр sender_id, чтобы можно было идентифицировать автора сообщения.
    Внутри broadcast проверяется, не является ли текущий клиент автором сообщения. Если да, то сообщение не отправляется этому клиенту.
    Все вызовы broadcast были обновлены, чтобы передавать sender_id.


Клиент:

    Импортируем asyncio.
    Функция receive_messages получает сообщения от сервера и выводит их на экран.
    Функция send_messages отправляет сообщения на сервер, вводимые пользователем.
    Функция start_client подключается к серверу, создает задачи для получения и отправки сообщений, и ждет их завершения.
